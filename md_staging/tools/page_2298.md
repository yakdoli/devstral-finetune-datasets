```html
<!--
source: image
domain: syncfusion-sdk
task: pdf-ocr-to-markdown
language: en (keep original; do not translate)
source_filename: page_2298.jpeg
document_name: tools
page_number: 2298
page_id: tools#page_2298
product: Syncfusion Winforms
version: 11.4.0.26
timestamp: 2025-08-09T09:47:51Z
fidelity: lossless
-->

# Essential Tools for Windows Forms

## Content

### Example Code
The following code snippet demonstrates conditional logic for selected nodes in a tree structure:

```csharp
OrElse args.SelectedNodes(0).Text="Node7" OrElse args.SelectedNodes(0).Text="Node10" Then
    args.Cancel = True
End If
End Sub
```

### Section: 3.21.5.15 How to prevent drawing highlight for some nodes

#### Overview
This section explains how to prevent drawing highlights for specific nodes using the `QueryAllowedPositionForNode` event.

#### Explanation
The `QueryAllowedPositionForNode` event is executed to prevent drawing highlights for certain nodes during drag-and-drop operations. Hereâ€™s how to implement this functionality:

1. **Declaration**:
   ```csharp
   private TreeViewAdvDragHighlightTracker treeViewDragHighlightTracker = null;
   ```

2. **Initialization**:
   ```csharp
   this.treeViewDragHighlightTracker = new TreeViewAdvDragHighlightTracker(this.treeViewAdv1);
   ```

3. **Event Handling**:
   The `TreeDragDrop_QueryAllowedPositionsForNode` event allows specifying the allowed drop positions for the highlight node. Below is the implementation:

   ```csharp
   // This event will let you disable certain drop-positions for certain nodes while dragging.
   // Specify the allowed drop positions for the specified highlight node.
   private void TreeDragDrop_QueryAllowedPositionsForNode(object sender, QueryAllowedPositionsEventArgs e)
   {
       if (!this.IsContinentNode(e.HighlightNode))
       {
           // If this is a country node, only allow drop above or below it.
           if (e.HighlightNode != this.currentSourceNode)
               e.AllowedPositions = TreeViewDropPositions.AboveNode | TreeViewDropPositions.BelowNode;
           else
           {
               // Cannot drop beside itself
               e.AllowedPositions = TreeViewDropPositions.None;
               this.treeViewDragHighlightTracker.EdgeSensitivity = e.HighlightNode.Bounds.Height / 2;
               e.ShowSelectionHighlight = false;
           }
       }
       else
       {
           // If this is a continent node allow all drop positions (default behavior).
           this.treeViewDragHighlightTracker.EdgeSensitivity = e.HighlightNode.Bounds.Height / 4;
       }
   }
   ```

## API Reference

The following API elements are used in the example:

- `TreeViewAdvDragHighlightTracker`: Manages the drag-and-drop highlight tracker.
- `TreeViewDropPositions`: Enumerates the allowed drop positions for nodes.
- `QueryAllowedPositionsEventArgs`: Provides properties for specifying the allowed drop positions.

## Code Examples

The provided code shows how to handle drag-and-drop operations with different highlight behavior for nodes based on their type.

## Page-level Navigation/TOC (if applicable)

No table of contents or further navigation links are present in this section.

## Cross References

See also:
- Other relevant sections in the user guide regarding drag-and-drop operations and highlighting in `TreeViewAdv`.

<!-- tags: winforms, syncfusion, drag-and-drop, highlighting, treeviewadv, position control, event handling, event handlers keywords: winforms, syncfusion sdk, toolset, essential tools, drag-and-drop functionality, highlighting control, nodes, event management, user guide -->
```